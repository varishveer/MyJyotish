@*
    For more information on enabling MVC for empty projects, visit https://go.microsoft.com/fwlink/?LinkID=397860
*@
@{
    Layout = "PendingJyotishLayout";
}

<style>
    .image-container {
        border: 1px solid #ddd;
        border-radius: 0.25rem;
        padding: 1rem;
        margin-bottom: 1rem;
        height:300px;
        width:300px;
    }

        .image-container img {
            max-width: 100%;
            height: auto;
        }





</style>
<div class="container mt-5">
    
    <div id="loading" class="alert alert-info" role="alert">
        Documents
    </div>
    <div class="row">
        <div class="col-md-6 col-lg-4 mb-4">
            <div class="image-container bg-light rounded">
                <label for="idProof" class="form-label">ID Proof:</label>
                <img id="idProof" alt="ID Proof" class="img-fluid" src="https://localhost:7118/Images/Placeholder/DocumentPlaceHolder.webp" >
            </div>
        </div>
        <div class="col-md-6 col-lg-4 mb-4">
            <div class="image-container bg-light rounded">
                <label for="addressProof" class="form-label">Address Proof:</label>
                <img id="addressProof" alt="Address Proof"  src="https://localhost:7118/Images/Placeholder/DocumentPlaceHolder.webp">
            </div>
        </div>
        <div class="col-md-6 col-lg-4 mb-4">
            <div class="image-container bg-light rounded">
                <label for="tenthCertificate" class="form-label">Tenth Certificate:</label>
                <img id="tenthCertificate" alt="Tenth Certificate" src="https://localhost:7118/Images/Placeholder/DocumentPlaceHolder.webp">
            </div>
        </div>
        <div class="col-md-6 col-lg-4 mb-4">
            <div class="image-container bg-light rounded">
                <label for="twelveCertificate" class="form-label">Twelve Certificate:</label>
                <img id="twelveCertificate" alt="Twelve Certificate" src="https://localhost:7118/Images/Placeholder/DocumentPlaceHolder.webp">
            </div>
        </div>
        <div class="col-md-6 col-lg-4 mb-4">
            <div class="image-container bg-light rounded">
                <label for="professionalCertificate" class="form-label">Professional Certificate:</label>
                <img id="professionalCertificate" alt="Professional Certificate" src="https://localhost:7118/Images/Placeholder/DocumentPlaceHolder.webp">
            </div>
        </div>
    </div>
</div>

<script>
    
    $(document).ready(function () {
        async function fetchDocuments() {
            const email = localStorage.getItem('userEmail');
            if (!email) {
                $('#statusMessage').text('No email address found in localStorage.');
                return;
            }

            try {
              
                const token = localStorage.getItem('Token3');
                const imageApiUrl = `https://localhost:7118/Api/PendingJyotish/Documents?email=${encodeURIComponent(email)}`; // Replace with your API endpoint for images

                const response = await $.ajax({
                    url: imageApiUrl,
                    method: 'GET',
                    headers: {
                        'Authorization': `Bearer ${token}`,
                       'Content-Type': 'application/json'
                   }
                });
                debugger;
                var path = "https://localhost:7118";

               
                $('#idProof').attr('src', response.data.idProof ? path + response.data.idProof : 'https://localhost:7118/Images/Placeholder/DocumentPlaceHolder.webp');
                $('#addressProof').attr('src', response.data.addressProof ? path + response.data.addressProof : 'https://localhost:7118/Images/Placeholder/DocumentPlaceHolder.webp');
                $('#tenthCertificate').attr('src', response.data.tenthCertificate ? path + response.data.tenthCertificate : 'https://localhost:7118/Images/Placeholder/DocumentPlaceHolder.webp');
                $('#twelveCertificate').attr('src', response.data.twelveCertificate ? path + response.data.twelveCertificate : 'https://localhost:7118/Images/Placeholder/DocumentPlaceHolder.webp');
                $('#professionalCertificate').attr('src', response.data.professionalCertificate ? path + response.data.professionalCertificate : 'https://localhost:7118/Images/Placeholder/DocumentPlaceHolder.webp');

              
                $('#loading').hide();

            } catch (error) {
                console.error('Error:', error);
                $('#statusMessage').text(`Error: ${error.message}`);
            }

        }

        fetchDocuments();
    });

</script>