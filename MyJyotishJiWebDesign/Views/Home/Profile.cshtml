

<link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css">
<style>
    .profile-container {
        max-width: 1170px;
        margin: 0 auto;
    }
    .profile-sidebar {
        background-color: white;
        padding: 20px;
        border-radius: 8px;
        box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
        position: sticky;
        top: 50px;
    }
    .profile-photo {
        width: 120px;
        height: 120px;
        border-radius: 50%;
        border: 5px solid #fff;
        margin-bottom: 20px;
        object-fit: cover;
    }
    .profile-main {
        background-color: #fff;
        padding: 20px;
        border-radius: 8px;
        box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
    }
    .section-title {
        font-size: 16px;
        margin-bottom: 15px;
        font-weight: 600;
        color: #333;
    }
    .detail-label {
        font-weight: 500;
        color: #6c757d;
        font-size: 14px;
    }
    .detail-value {
        font-weight: 600;
        color: #495057;
        font-size: 14px;
    }
</style>

<div class="container profile-container mt-4">
    <div class="row">
        <!-- Left Sidebar -->
        <div class="col-md-4 left-part">
            <div class="mb-3">
                <img id="profileImage" src="~/Img/Astrologer.jpg" alt="Profile Image" class="profile-photo">
            </div>
            <div class="mb-3">
                <button class="notification-btn btn btn-light">
                    <i class="bi bi-bell"></i>
                    <span class="badge rounded-pill bg-danger">3</span>
                </button>
            </div>
            <div class="mb-3 d-flex justify-content-between flex-row">
                <button class="btn btn-outline-info mx-1"><a href="/Jyotish/UpdateProfile">Edit Profile</a></button>
                <button class="btn btn-outline-primary">Logout Account</button>
            </div>
        </div>

        <!-- Right Profile Details -->
        <div class="col-md-8">
            <div class="profile-main">
                <div class="section-title">Personal Details</div>
                <div class="row">
                    <div class="col-md-6">
                        <div class="detail-label">Full Name</div>
                        <div class="detail-value" id="name"></div>
                    </div>
                    <div class="col-md-6">
                        <div class="detail-label">Email</div>
                        <div class="detail-value" id="email"></div>
                    </div>
                </div>
                <div class="row">
                    <div class="col-md-6">
                        <div class="detail-label">Phone</div>
                        <div class="detail-value" id="mobile"></div>
                    </div>
                    <div class="col-md-6">
                        <div class="detail-label">Gender</div>
                        <div class="detail-value" id="gender"></div>
                    </div>
                </div>
                <div class="row">
                    <div class="col-md-6">
                        <div class="detail-label">Date of Birth</div>
                        <div class="detail-value" id="dateOfBirth"></div>
                    </div>
                    <div class="col-md-6">
                        <div class="detail-label">Country</div>
                        <div class="detail-value" id="country"></div>
                    </div>
                </div>
                <div class="row">
                    <div class="col-md-6">
                        <div class="detail-label">State</div>
                        <div class="detail-value" id="state"></div>
                    </div>
                    <div class="col-md-6">
                        <div class="detail-label">City</div>
                        <div class="detail-value" id="city"></div>
                    </div>
                </div>
                
            </div>
        </div>
    </div>
</div>

<script>
    $(document).ready(function () {
        var Id = localStorage.getItem('userId'); // Assuming Id is stored in localStorage
        debugger;
        $.ajax({
            url: BaseUrl + `api/User/GetUserProfile?Id=${Id}`,
            type: 'GET',
            headers: {
                'Authorization': `Bearer ${localStorage.getItem("Token")}`,
                'Content-Type': 'application/json',
            },
            success: function (response) {
                debugger;
                if (response.status === 200) {
                    var profile = response.data;
                    // Fill in the data fields
                    $('#profileImage').attr('src', profile.profilePictureUrl ? BaseUrl + profile.profilePictureUrl : '~/Img/Astrologer.jpg');
                    $('#name').text(profile.name);
                    $('#email').text(profile.email);
                    $('#mobile').text(profile.mobile);
                    $('#gender').text(profile.gender);
                    $('#dateOfBirth').text(profile.doB !== "null" ? profile.doB : 'N/A');
                    $('#country').text(profile.country);
                    $('#state').text(profile.state);
                    $('#city').text(profile.city);
                } else {
                    alert('Error: Could not load profile.');
                }
            },
            error: function (xhr, status, error) {
                debugger;
                console.error('Error:', error);
                alert('There was an error fetching the profile data.');
            }
        });
    });
</script>
