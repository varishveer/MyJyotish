<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>@ViewData["Title"] - MyJyotishJiWebDesign</title>

    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">

    <!-- FontAwesome for icons -->
    <script defer src="https://use.fontawesome.com/releases/v5.15.4/js/all.js" integrity="sha384-rOA1PnstxnOBLzCLMcre8ybwbTmemjzdNlILg8O7z1lUkLXozs4DHonlDtnE7fpc" crossorigin="anonymous"></script>

    <!-- jQuery -->
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>

    <style>
        /* Custom styles */
        .fixed-section {
            position: fixed;
            top: 150px;
            right: 0;
            width: 100px;
            height: 140px;
            background-color: rgb(116, 82, 199);
            box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);
            border: 1px solid #ddd;
            z-index: 1000;
            overflow-y: auto;
            transition: width 0.3s ease, transform 0.3s ease;
            text-align: center;
        }

        .content-container-fluid {
            padding: 15px;
        }

        .fixed-section.hidden {
            transform: translateX(100%);
            width: 0;
        }

        /* Search bar style */
        #searchForm {
            display: none;
        }
    </style>
</head>
<body>
    <!-- Bootstrap JS Bundle -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz" crossorigin="anonymous"></script>

    <nav class="navbar navbar-expand-lg navbar-light fixed-top p-0" style="background-color:#fde0b6">
        <div class="container-fluid">
            <a class="navbar-brand p-0" href="#">
                <img src="https://api.myjyotishg.in/Images/Logo.png" width="70" height="40" />
            </a>
            <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav" aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation">
                <span class="navbar-toggler-icon"></span>
            </button>
            <div class="collapse navbar-collapse" id="navbarNav">
                <ul class="navbar-nav ms-auto">
                    <li class="nav-item dropdown">
                        <a class="nav-link dropdown-toggle" href="#" id="languageDropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
                            Language
                        </a>
                        <ul class="dropdown-menu" aria-labelledby="languageDropdown">
                            <li><a class="dropdown-item" href="#">English</a></li>
                            <li><a class="dropdown-item" href="#">Hindi</a></li>
                        </ul>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="#">Book a Pooja</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="#">Free Kundli</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="#">Kundli Matching</a>
                    </li>
                    <li class="nav-item dropdown">
                        <a class="nav-link dropdown-toggle" href="#" id="horoscopeDropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
                            Horoscope
                        </a>
                        <ul class="dropdown-menu" aria-labelledby="horoscopeDropdown">
                            <li><a class="dropdown-item" href="#">Today</a></li>
                            <li><a class="dropdown-item" href="#">Weekly</a></li>
                            <li><a class="dropdown-item" href="#">Overall</a></li>
                        </ul>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="/Home/Chat">Chat with Astrologer</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="/Home/Talk">Call with Astrologer</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="#">Blog</a>
                    </li>
                    <li class="nav-item dropdown" id="LoginDropdown">
                        <a class="nav-link dropdown-toggle" href="#" role="button" data-bs-toggle="dropdown" aria-expanded="false">
                            Login
                        </a>
                        <ul class="dropdown-menu dropdown-menu-end" style="z-index:1040;">
                            <li><a class="dropdown-item" href="/Jyotish/Login">Astrologer</a></li>
                            <li><a class="dropdown-item" href="/Home/Login">User</a></li>
                        </ul>
                    </li>
                    <button class="btn btn-outline-dark ms-3 border-0" id="toggleSearch">
                        <svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 24 24">
                            <path fill="currentColor" d="m19.485 20.154-6.262-6.262q-.75.639-1.725.989t-1.96.35q-2.402 0-4.066-1.663T3.808 9.503T5.47 5.436t4.064-1.667t4.068 1.664T15.268 9.5q0 1.042-.369 2.017t-.97 1.668l6.262 6.261zM9.539 14.23q1.99 0 3.36-1.37t1.37-3.361t-1.37-3.36t-3.36-1.37t-3.361 1.37t-1.37 3.36t1.37 3.36t3.36 1.37"></path>
                        </svg>
                    </button>
                </ul>
            </div>
        </div>
    </nav>

    <!-- Search Bar -->
    <div class="container-fluid" id="searchcontainer" >
        <div class="container d-flex justify-content-center">
            <div id="searchForm" class="justify-content-center align-items-center">
                <label for="searchInput" class="visually-hidden">Search</label>
                <input id="searchInput" class="form-control me-2" type="search" placeholder="Search" aria-label="Search" style="height:30px">
                <button id="SearchBoxIcon" style="margin-left:-30px" class="border-0"><i class="fa-solid fa-xmark"></i></button>
            </div>
        </div>
    </div>
     <script>
        document.addEventListener('DOMContentLoaded', function () {
            var toggleIcon = document.getElementById('SearchBoxIcon');
            var toggleButton = document.getElementById('toggleSearch');
            var searchForm = document.getElementById('searchForm');
            var loginMenu = document.getElementById('LoginDropdown');
            var navbarNav = document.querySelector('.navbar-nav');

            // Function to check user login status
            function checkUserLogin() {
                var userId = localStorage.getItem('userId');
                if (userId !== null) {
                    // Hide login menu and show profile section
                    loginMenu.style.display = 'none';

                    // Create Profile section
                    var profileSection = document.createElement('li');
                    profileSection.classList.add('nav-item', 'dropdown');
                    profileSection.innerHTML = `
                        <a class="nav-link dropdown-toggle" href="#" id="profileDropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
                            <i class="fas fa-user-circle"></i> Profile
                        </a>
                        <ul class="dropdown-menu dropdown-menu-end" aria-labelledby="profileDropdown">
                            <li><a class="dropdown-item" href="/Home/Profile">View Profile</a></li>
                            <li><a class="dropdown-item" href="#" id="logoutBtn">Logout</a></li>
                        </ul>
                    `;
                    navbarNav.appendChild(profileSection);

                    // Handle logout
                    document.getElementById('logoutBtn').addEventListener('click', function () {
                        localStorage.removeItem('userId');  // Remove user ID from localStorage
                        location.reload();  // Reload the page to update the navbar
                    });
                }
            }

            // Search bar toggle functionality
            toggleButton.addEventListener('click', function () {
                if (searchForm.style.display === 'none' || searchForm.style.display === '') {
                    searchForm.style.display = 'flex';
                } else {
                    searchForm.style.display = 'none';
                }
            });

            toggleIcon.addEventListener('click', function () {
                searchForm.style.display = 'none';
            });

            // Check user login on page load
            checkUserLogin();
        });

        var BaseUrl = "https://api.myjyotishg.in/";
    </script>
    <div style="margin-top: 70px;">
        @RenderBody()
    </div>

    @await RenderSectionAsync("Scripts", required: false)

    <!-- JavaScript for Search Toggle and User Profile -->
   
</body>
</html>
