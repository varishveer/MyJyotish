@*
    For more information on enabling MVC for empty projects, visit https://go.microsoft.com/fwlink/?LinkID=397860
*@
@{
    Layout = "JyotishLayout";
}
<style>
    .card-body {
        padding-left: 15px !important;
        padding-right: 15px !important;
    }

    label {
        display: none;
    }
</style>

<script src="https://code.jquery.com/jquery-3.5.1.min.js"></script>
<link href="https://cdn.datatables.net/2.1.3/css/dataTables.dataTables.min.css" rel="stylesheet" />
<script src="https://cdn.datatables.net/2.1.3/js/dataTables.min.js"></script>

<div class="container-fluid mt-4">
    <div class="card">

        <div class="d-flex flex-row justify-content-between align-items-center pt-2 px-4">
            <h5 class="text-primary">Team Member</h5>
      @*       <a href="/Admin/AddPoojaCategory">
                <button class="btn btn-primary">Add New Category</button>
            </a> *@
        </div>
        <hr />

        <div class="card-body">
            <div class="table-responsive">
                <table id="DataTable" class="table table-bordered table-striped">
                    <table id="teamMemberTable" class="table table-striped table-bordered">
                        <thead>
                            <tr>
                                <th scope="col">Id</th>
                                <th scope="col">Name</th>
                                <th scope="col">Mobile</th>
                                <th scope="col">Email</th>
                                <th scope="col">Action</th>
                            </tr>
                        </thead>
                        <tbody>
                            <!-- Data will be dynamically inserted here -->
                        </tbody>
                    </table>
                </table>
            </div>
        </div>
    </div>
</div>


  <script>
    var email = localStorage.getItem('userEmail');
    $('#teamMemberTable').DataTable({
       
        ajax: {
            url: `https://localhost:7118/api/Jyotish/TeamMember?JyotishEmail=${encodeURIComponent(email)}`,
            type: 'GET',
            headers: {
                'Authorization': `Bearer ${localStorage.getItem("Token2")}`,
                'Content-Type': 'application/json',
            },
            dataSrc: function (json) {
                return json; // Return the JSON array directly
            }
        },
        columns: [
            { data: 'id' },
            { data: 'name' },
            { data: 'mobile' },
            { data: 'email' },
            {
                data: null, // This column is for the Action buttons
                render: function (data, type, row) {
                    return '<button class="btn btn-primary">View</button>';
                    // Add other action buttons as needed
                }
            }
        ]
    });
  </script>